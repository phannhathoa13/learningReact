‚úÖ M·ª•c 5: useEffect

üß† C√¢u h·ªèi:
useEffect ch·∫°y khi n√†o?
=> ch·∫°y khi c√°c components ƒëc rendet xong
L√†m sao ƒë·ªÉ useEffect ch·ªâ ch·∫°y m·ªôt l·∫ßn?
=> khai b√°o useEffect l√† 1 m·ªôt arrow function v√† ngay d·∫•u ƒë√≥ng c√≥ th√™m []
ƒêi·ªÅu g√¨ x·∫£y ra n·∫øu dependency array b·ªã thi·∫øu?
=> n√≥ s·∫Ω ch·∫°y khi b·∫•t k√¨ components renders l·∫°i

üß™ B√†i t·∫≠p:
D√πng useEffect ƒë·ªÉ log "Component mounted" 1 l·∫ßn duy nh·∫•t. //
=> function TestUseffect() {
const [count, setCount] = useState(0);

useEffect(() => {
console.log(`useEffect run ${count}`);
}, [])
return (
<>
  <p>You clicked: {count}</p>
  <button onClick={()=> setCount(count + 1)}>Increase</button>
</>
)
}
G·ªçi API t·ª´ https://jsonplaceholder.typicode.com/users v√† hi·ªÉn th·ªã danh s√°ch t√™n.
=> function DisplayListUser() {
const [userList, setUserList] = useState([]);

useEffect(() => {
async function getUsers() {
return setUserList(await fetchUser$())
}
getUsers();
}, [])

return (
<>
  {userList.map((users, index) => {
  return <p key={index}>{users.name} </p>
  })}
</>
)
}

T·∫°o ƒë·ªìng h·ªì th·ªùi gian th·ª±c (d√πng setInterval + useEffect).
=> function DisplayRealTime() {
const [time, setTime] = useState(new Date().toLocaleTimeString());

useEffect(() => {
setInterval(() => {
setTime(new Date().toLocaleTimeString())
}, 1000);
}, [])
return (
<>
  <h2>Time</h2>
  {time}
</>
)
}
B·∫Øt s·ª± ki·ªán cu·ªôn (scroll) v√† log v·ªã tr√≠ cu·ªôn v√†o console.
=> function CacthUserScroll() {
window.addEventListener('scroll', () => {
const scrollPosition = window.scrollY
console.log(scrollPosition, "px");
})

return (
<div style={{ height: "500px" }}>
  <p>Scroll down and check log</p>
</div>
)
}



=> State 1 : Khi render xong, useEffect ch·∫°y 1 l·∫ßn
useEffect(() => {

},[])

=> State 2 : Khi render xong v√† s·∫Ω ch·∫°y th·∫±ng useEffect
useEffect(() => {

},[])

=> State 3 : return() => {} l√† h√†m void n√≥ s·∫Ω ch·∫°y sau khi ccomponents ƒë√≥ b·ªã ƒë√≥ng


=> nghi√™n c·ª©u th√™m c√≥ tr∆∞·ªùng h·ª£p n√†o x·ª≠ l√≠ tr∆∞·ªõc khi render kh√¥ng