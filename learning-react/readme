âœ… Má»¥c 5: useEffect

ðŸ§  CÃ¢u há»i:
useEffect cháº¡y khi nÃ o?
    => cháº¡y khi cÃ¡c components Ä‘c rendet xong
LÃ m sao Ä‘á»ƒ useEffect chá»‰ cháº¡y má»™t láº§n?
    => khai bÃ¡o useEffect lÃ  1 má»™t arrow function vÃ  ngay dáº¥u Ä‘Ã³ng cÃ³ thÃªm []
Äiá»u gÃ¬ xáº£y ra náº¿u dependency array bá»‹ thiáº¿u?
    => nÃ³ sáº½ cháº¡y khi báº¥t kÃ¬ components renders láº¡i

ðŸ§ª BÃ i táº­p:
DÃ¹ng useEffect Ä‘á»ƒ log "Component mounted" 1 láº§n duy nháº¥t.
    => function TestUseffect() {
  const [count, setCount] = useState(0);

  useEffect(() => {
    console.log(`useEffect run ${count}`);
  }, [])
  return (
    <>
      <p>You clicked: {count}</p>
      <button onClick={() => setCount(count + 1)}>Increase</button>
    </>
  )
}
Gá»i API tá»« https://jsonplaceholder.typicode.com/users vÃ  hiá»ƒn thá»‹ danh sÃ¡ch tÃªn.
    => function DisplayListUser() {
  const [userList, setUserList] = useState([]);

  useEffect(() => {
    async function getUsers() {
      return setUserList(await fetchUser$())
    }
    getUsers();
  }, [])

  return (
    <>
      {userList.map((users, index) => {
        return <p key={index} >{users.name} </p>
      })}
    </>
  )
}

Táº¡o Ä‘á»“ng há»“ thá»i gian thá»±c (dÃ¹ng setInterval + useEffect).
    => function DisplayRealTime() {
  const [time, setTime] = useState(new Date().toLocaleTimeString());

  useEffect(() => {
    setInterval(() => {
      setTime(new Date().toLocaleTimeString())
    }, 1000);
  }, [])
  return (
    <>
      <h2>Time</h2>
      {time}
    </>
  )
}
Báº¯t sá»± kiá»‡n cuá»™n (scroll) vÃ  log vá»‹ trÃ­ cuá»™n vÃ o console.
    => function CacthUserScroll() {
    window.addEventListener('scroll', () => {
      const scrollPosition = window.scrollY
      console.log(scrollPosition, "px");
    })

  return (
    <div style={{ height: "500px" }}>
      <p>Scroll down and check log</p>
    </div>
  )
}

